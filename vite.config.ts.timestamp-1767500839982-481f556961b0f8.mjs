// vite.config.ts
import { defineConfig, loadEnv } from "file:///home/project/node_modules/vite/dist/node/index.js";
import react from "file:///home/project/node_modules/@vitejs/plugin-react/dist/index.mjs";
import { readFileSync, writeFileSync, readdirSync } from "fs";
import { join } from "path";
var __vite_injected_original_dirname = "/home/project";
var buildTimestamp = Date.now();
var inlineEnvPlugin = () => {
  return {
    name: "inline-env-plugin",
    apply: "build",
    closeBundle() {
      const distPath = join(__vite_injected_original_dirname, "dist");
      const env = loadEnv("production", process.cwd(), "");
      const envScript = `
window.ENV = {
  FIREBASE_API_KEY: '${env.VITE_FIREBASE_API_KEY || ""}',
  FIREBASE_AUTH_DOMAIN: '${env.VITE_FIREBASE_AUTH_DOMAIN || ""}',
  FIREBASE_DATABASE_URL: '${env.VITE_FIREBASE_DATABASE_URL || ""}',
  FIREBASE_PROJECT_ID: '${env.VITE_FIREBASE_PROJECT_ID || ""}',
  FIREBASE_STORAGE_BUCKET: '${env.VITE_FIREBASE_STORAGE_BUCKET || ""}',
  FIREBASE_MESSAGING_SENDER_ID: '${env.VITE_FIREBASE_MESSAGING_SENDER_ID || ""}',
  FIREBASE_APP_ID: '${env.VITE_FIREBASE_APP_ID || ""}',
  FIREBASE_ADMIN_API_KEY: '${env.VITE_FIREBASE_ADMIN_API_KEY || ""}',
  FIREBASE_ADMIN_AUTH_DOMAIN: '${env.VITE_FIREBASE_ADMIN_AUTH_DOMAIN || ""}',
  FIREBASE_ADMIN_DATABASE_URL: '${env.VITE_FIREBASE_ADMIN_DATABASE_URL || ""}',
  FIREBASE_ADMIN_PROJECT_ID: '${env.VITE_FIREBASE_ADMIN_PROJECT_ID || ""}',
  FIREBASE_ADMIN_STORAGE_BUCKET: '${env.VITE_FIREBASE_ADMIN_STORAGE_BUCKET || ""}',
  FIREBASE_ADMIN_MESSAGING_SENDER_ID: '${env.VITE_FIREBASE_ADMIN_MESSAGING_SENDER_ID || ""}',
  FIREBASE_ADMIN_APP_ID: '${env.VITE_FIREBASE_ADMIN_APP_ID || ""}',
  ADMIN_UID: '${env.VITE_ADMIN_UID || ""}'
};
      `.trim();
      try {
        const htmlFiles = readdirSync(distPath).filter((file) => file.endsWith(".html"));
        htmlFiles.forEach((file) => {
          const filePath = join(distPath, file);
          let content = readFileSync(filePath, "utf-8");
          content = content.replace(
            /<script src="\/env-config\.js"><\/script>/g,
            `<script>${envScript}</script>`
          );
          writeFileSync(filePath, content, "utf-8");
        });
        console.log(`\u2713 Environment variables injected inline in ${htmlFiles.length} HTML files`);
      } catch (error) {
        console.error("Failed to inject inline env variables:", error);
      }
    }
  };
};
var swVersionPlugin = () => {
  return {
    name: "sw-version-plugin",
    apply: "build",
    closeBundle() {
      const swPath = join(__vite_injected_original_dirname, "dist", "sw.js");
      try {
        let content = readFileSync(swPath, "utf-8");
        content = content.replace(
          /const CACHE_VERSION = Date\.now\(\);/,
          `const CACHE_VERSION = ${buildTimestamp};`
        );
        writeFileSync(swPath, content, "utf-8");
        console.log(`\u2713 Service Worker versioned with timestamp: ${buildTimestamp}`);
      } catch (error) {
        console.error("Failed to version Service Worker:", error);
      }
    }
  };
};
var vite_config_default = defineConfig({
  base: "/",
  plugins: [react(), inlineEnvPlugin(), swVersionPlugin()],
  optimizeDeps: {
    exclude: ["lucide-react"]
  },
  build: {
    rollupOptions: {
      output: {
        manualChunks: void 0
      }
    }
  }
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9wcm9qZWN0XCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9wcm9qZWN0L3ZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL3Byb2plY3Qvdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBkZWZpbmVDb25maWcsIFBsdWdpbiwgbG9hZEVudiB9IGZyb20gJ3ZpdGUnO1xuaW1wb3J0IHJlYWN0IGZyb20gJ0B2aXRlanMvcGx1Z2luLXJlYWN0JztcbmltcG9ydCB7IHJlYWRGaWxlU3luYywgd3JpdGVGaWxlU3luYywgcmVhZGRpclN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5cbmNvbnN0IGJ1aWxkVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblxuY29uc3QgaW5saW5lRW52UGx1Z2luID0gKCk6IFBsdWdpbiA9PiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ2lubGluZS1lbnYtcGx1Z2luJyxcbiAgICBhcHBseTogJ2J1aWxkJyxcbiAgICBjbG9zZUJ1bmRsZSgpIHtcbiAgICAgIGNvbnN0IGRpc3RQYXRoID0gam9pbihfX2Rpcm5hbWUsICdkaXN0Jyk7XG4gICAgICBjb25zdCBlbnYgPSBsb2FkRW52KCdwcm9kdWN0aW9uJywgcHJvY2Vzcy5jd2QoKSwgJycpO1xuXG4gICAgICBjb25zdCBlbnZTY3JpcHQgPSBgXG53aW5kb3cuRU5WID0ge1xuICBGSVJFQkFTRV9BUElfS0VZOiAnJHtlbnYuVklURV9GSVJFQkFTRV9BUElfS0VZIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FVVEhfRE9NQUlOOiAnJHtlbnYuVklURV9GSVJFQkFTRV9BVVRIX0RPTUFJTiB8fCAnJ30nLFxuICBGSVJFQkFTRV9EQVRBQkFTRV9VUkw6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0RBVEFCQVNFX1VSTCB8fCAnJ30nLFxuICBGSVJFQkFTRV9QUk9KRUNUX0lEOiAnJHtlbnYuVklURV9GSVJFQkFTRV9QUk9KRUNUX0lEIHx8ICcnfScsXG4gIEZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUOiAnJHtlbnYuVklURV9GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCB8fCAnJ30nLFxuICBGSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEOiAnJHtlbnYuVklURV9GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FQUF9JRDogJyR7ZW52LlZJVEVfRklSRUJBU0VfQVBQX0lEIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FETUlOX0FQSV9LRVk6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX0FQSV9LRVkgfHwgJyd9JyxcbiAgRklSRUJBU0VfQURNSU5fQVVUSF9ET01BSU46ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX0FVVEhfRE9NQUlOIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FETUlOX0RBVEFCQVNFX1VSTDogJyR7ZW52LlZJVEVfRklSRUJBU0VfQURNSU5fREFUQUJBU0VfVVJMIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FETUlOX1BST0pFQ1RfSUQ6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX1BST0pFQ1RfSUQgfHwgJyd9JyxcbiAgRklSRUJBU0VfQURNSU5fU1RPUkFHRV9CVUNLRVQ6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX1NUT1JBR0VfQlVDS0VUIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FETUlOX01FU1NBR0lOR19TRU5ERVJfSUQ6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX01FU1NBR0lOR19TRU5ERVJfSUQgfHwgJyd9JyxcbiAgRklSRUJBU0VfQURNSU5fQVBQX0lEOiAnJHtlbnYuVklURV9GSVJFQkFTRV9BRE1JTl9BUFBfSUQgfHwgJyd9JyxcbiAgQURNSU5fVUlEOiAnJHtlbnYuVklURV9BRE1JTl9VSUQgfHwgJyd9J1xufTtcbiAgICAgIGAudHJpbSgpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBodG1sRmlsZXMgPSByZWFkZGlyU3luYyhkaXN0UGF0aCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5lbmRzV2l0aCgnLmh0bWwnKSk7XG5cbiAgICAgICAgaHRtbEZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBqb2luKGRpc3RQYXRoLCBmaWxlKTtcbiAgICAgICAgICBsZXQgY29udGVudCA9IHJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0Zi04Jyk7XG5cbiAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKFxuICAgICAgICAgICAgLzxzY3JpcHQgc3JjPVwiXFwvZW52LWNvbmZpZ1xcLmpzXCI+PFxcL3NjcmlwdD4vZyxcbiAgICAgICAgICAgIGA8c2NyaXB0PiR7ZW52U2NyaXB0fTwvc2NyaXB0PmBcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgd3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgY29udGVudCwgJ3V0Zi04Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTI3MTMgRW52aXJvbm1lbnQgdmFyaWFibGVzIGluamVjdGVkIGlubGluZSBpbiAke2h0bWxGaWxlcy5sZW5ndGh9IEhUTUwgZmlsZXNgKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbmplY3QgaW5saW5lIGVudiB2YXJpYWJsZXM6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbmNvbnN0IHN3VmVyc2lvblBsdWdpbiA9ICgpOiBQbHVnaW4gPT4ge1xuICByZXR1cm4ge1xuICAgIG5hbWU6ICdzdy12ZXJzaW9uLXBsdWdpbicsXG4gICAgYXBwbHk6ICdidWlsZCcsXG4gICAgY2xvc2VCdW5kbGUoKSB7XG4gICAgICBjb25zdCBzd1BhdGggPSBqb2luKF9fZGlybmFtZSwgJ2Rpc3QnLCAnc3cuanMnKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gcmVhZEZpbGVTeW5jKHN3UGF0aCwgJ3V0Zi04Jyk7XG5cbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShcbiAgICAgICAgICAvY29uc3QgQ0FDSEVfVkVSU0lPTiA9IERhdGVcXC5ub3dcXChcXCk7LyxcbiAgICAgICAgICBgY29uc3QgQ0FDSEVfVkVSU0lPTiA9ICR7YnVpbGRUaW1lc3RhbXB9O2BcbiAgICAgICAgKTtcblxuICAgICAgICB3cml0ZUZpbGVTeW5jKHN3UGF0aCwgY29udGVudCwgJ3V0Zi04Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBcdTI3MTMgU2VydmljZSBXb3JrZXIgdmVyc2lvbmVkIHdpdGggdGltZXN0YW1wOiAke2J1aWxkVGltZXN0YW1wfWApO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHZlcnNpb24gU2VydmljZSBXb3JrZXI6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbmZpZyh7XG4gIGJhc2U6ICcvJyxcbiAgcGx1Z2luczogW3JlYWN0KCksIGlubGluZUVudlBsdWdpbigpLCBzd1ZlcnNpb25QbHVnaW4oKV0sXG4gIG9wdGltaXplRGVwczoge1xuICAgIGV4Y2x1ZGU6IFsnbHVjaWRlLXJlYWN0J10sXG4gIH0sXG4gIGJ1aWxkOiB7XG4gICAgcm9sbHVwT3B0aW9uczoge1xuICAgICAgb3V0cHV0OiB7XG4gICAgICAgIG1hbnVhbENodW5rczogdW5kZWZpbmVkXG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBeU4sU0FBUyxjQUFz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
