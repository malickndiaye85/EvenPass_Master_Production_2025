// vite.config.ts
import { defineConfig, loadEnv } from "file:///home/project/node_modules/vite/dist/node/index.js";
import react from "file:///home/project/node_modules/@vitejs/plugin-react/dist/index.mjs";
import { readFileSync, writeFileSync, readdirSync } from "fs";
import { join } from "path";
var __vite_injected_original_dirname = "/home/project";
var buildTimestamp = Date.now();
var inlineEnvPlugin = () => {
  return {
    name: "inline-env-plugin",
    apply: "build",
    closeBundle() {
      const distPath = join(__vite_injected_original_dirname, "dist");
      const env = loadEnv("production", process.cwd(), "");
      const envScript = `
window.ENV = {
  FIREBASE_API_KEY: '${env.VITE_FIREBASE_API_KEY || ""}',
  FIREBASE_AUTH_DOMAIN: '${env.VITE_FIREBASE_AUTH_DOMAIN || ""}',
  FIREBASE_DATABASE_URL: '${env.VITE_FIREBASE_DATABASE_URL || ""}',
  FIREBASE_PROJECT_ID: '${env.VITE_FIREBASE_PROJECT_ID || ""}',
  FIREBASE_STORAGE_BUCKET: '${env.VITE_FIREBASE_STORAGE_BUCKET || ""}',
  FIREBASE_MESSAGING_SENDER_ID: '${env.VITE_FIREBASE_MESSAGING_SENDER_ID || ""}',
  FIREBASE_APP_ID: '${env.VITE_FIREBASE_APP_ID || ""}',
  FIREBASE_ADMIN_API_KEY: '${env.VITE_FIREBASE_ADMIN_API_KEY || ""}',
  FIREBASE_ADMIN_AUTH_DOMAIN: '${env.VITE_FIREBASE_ADMIN_AUTH_DOMAIN || ""}',
  FIREBASE_ADMIN_DATABASE_URL: '${env.VITE_FIREBASE_ADMIN_DATABASE_URL || ""}',
  FIREBASE_ADMIN_PROJECT_ID: '${env.VITE_FIREBASE_ADMIN_PROJECT_ID || ""}',
  FIREBASE_ADMIN_STORAGE_BUCKET: '${env.VITE_FIREBASE_ADMIN_STORAGE_BUCKET || ""}',
  FIREBASE_ADMIN_MESSAGING_SENDER_ID: '${env.VITE_FIREBASE_ADMIN_MESSAGING_SENDER_ID || ""}',
  FIREBASE_ADMIN_APP_ID: '${env.VITE_FIREBASE_ADMIN_APP_ID || ""}',
  ADMIN_UID: '${env.VITE_ADMIN_UID || ""}',
  SUPABASE_URL: '${env.VITE_SUPABASE_URL || ""}',
  SUPABASE_ANON_KEY: '${env.VITE_SUPABASE_ANON_KEY || ""}'
};
      `.trim();
      try {
        const htmlFiles = readdirSync(distPath).filter((file) => file.endsWith(".html"));
        htmlFiles.forEach((file) => {
          const filePath = join(distPath, file);
          let content = readFileSync(filePath, "utf-8");
          content = content.replace(
            /<script src="\/env-config\.js"><\/script>/g,
            `<script>${envScript}</script>`
          );
          writeFileSync(filePath, content, "utf-8");
        });
        console.log(`\u2713 Environment variables injected inline in ${htmlFiles.length} HTML files`);
      } catch (error) {
        console.error("Failed to inject inline env variables:", error);
      }
    }
  };
};
var swVersionPlugin = () => {
  return {
    name: "sw-version-plugin",
    apply: "build",
    closeBundle() {
      const swPath = join(__vite_injected_original_dirname, "dist", "sw.js");
      try {
        let content = readFileSync(swPath, "utf-8");
        content = content.replace(
          /const CACHE_VERSION = Date\.now\(\);/,
          `const CACHE_VERSION = ${buildTimestamp};`
        );
        writeFileSync(swPath, content, "utf-8");
        console.log(`\u2713 Service Worker versioned with timestamp: ${buildTimestamp}`);
      } catch (error) {
        console.error("Failed to version Service Worker:", error);
      }
    }
  };
};
var vite_config_default = defineConfig({
  base: "/",
  plugins: [react(), inlineEnvPlugin(), swVersionPlugin()],
  optimizeDeps: {
    exclude: ["lucide-react"]
  },
  build: {
    rollupOptions: {
      output: {
        manualChunks: void 0
      }
    }
  }
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9wcm9qZWN0XCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9wcm9qZWN0L3ZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL3Byb2plY3Qvdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBkZWZpbmVDb25maWcsIFBsdWdpbiwgbG9hZEVudiB9IGZyb20gJ3ZpdGUnO1xuaW1wb3J0IHJlYWN0IGZyb20gJ0B2aXRlanMvcGx1Z2luLXJlYWN0JztcbmltcG9ydCB7IHJlYWRGaWxlU3luYywgd3JpdGVGaWxlU3luYywgcmVhZGRpclN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5cbmNvbnN0IGJ1aWxkVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblxuY29uc3QgaW5saW5lRW52UGx1Z2luID0gKCk6IFBsdWdpbiA9PiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ2lubGluZS1lbnYtcGx1Z2luJyxcbiAgICBhcHBseTogJ2J1aWxkJyxcbiAgICBjbG9zZUJ1bmRsZSgpIHtcbiAgICAgIGNvbnN0IGRpc3RQYXRoID0gam9pbihfX2Rpcm5hbWUsICdkaXN0Jyk7XG4gICAgICBjb25zdCBlbnYgPSBsb2FkRW52KCdwcm9kdWN0aW9uJywgcHJvY2Vzcy5jd2QoKSwgJycpO1xuXG4gICAgICBjb25zdCBlbnZTY3JpcHQgPSBgXG53aW5kb3cuRU5WID0ge1xuICBGSVJFQkFTRV9BUElfS0VZOiAnJHtlbnYuVklURV9GSVJFQkFTRV9BUElfS0VZIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FVVEhfRE9NQUlOOiAnJHtlbnYuVklURV9GSVJFQkFTRV9BVVRIX0RPTUFJTiB8fCAnJ30nLFxuICBGSVJFQkFTRV9EQVRBQkFTRV9VUkw6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0RBVEFCQVNFX1VSTCB8fCAnJ30nLFxuICBGSVJFQkFTRV9QUk9KRUNUX0lEOiAnJHtlbnYuVklURV9GSVJFQkFTRV9QUk9KRUNUX0lEIHx8ICcnfScsXG4gIEZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUOiAnJHtlbnYuVklURV9GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCB8fCAnJ30nLFxuICBGSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEOiAnJHtlbnYuVklURV9GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FQUF9JRDogJyR7ZW52LlZJVEVfRklSRUJBU0VfQVBQX0lEIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FETUlOX0FQSV9LRVk6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX0FQSV9LRVkgfHwgJyd9JyxcbiAgRklSRUJBU0VfQURNSU5fQVVUSF9ET01BSU46ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX0FVVEhfRE9NQUlOIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FETUlOX0RBVEFCQVNFX1VSTDogJyR7ZW52LlZJVEVfRklSRUJBU0VfQURNSU5fREFUQUJBU0VfVVJMIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FETUlOX1BST0pFQ1RfSUQ6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX1BST0pFQ1RfSUQgfHwgJyd9JyxcbiAgRklSRUJBU0VfQURNSU5fU1RPUkFHRV9CVUNLRVQ6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX1NUT1JBR0VfQlVDS0VUIHx8ICcnfScsXG4gIEZJUkVCQVNFX0FETUlOX01FU1NBR0lOR19TRU5ERVJfSUQ6ICcke2Vudi5WSVRFX0ZJUkVCQVNFX0FETUlOX01FU1NBR0lOR19TRU5ERVJfSUQgfHwgJyd9JyxcbiAgRklSRUJBU0VfQURNSU5fQVBQX0lEOiAnJHtlbnYuVklURV9GSVJFQkFTRV9BRE1JTl9BUFBfSUQgfHwgJyd9JyxcbiAgQURNSU5fVUlEOiAnJHtlbnYuVklURV9BRE1JTl9VSUQgfHwgJyd9JyxcbiAgU1VQQUJBU0VfVVJMOiAnJHtlbnYuVklURV9TVVBBQkFTRV9VUkwgfHwgJyd9JyxcbiAgU1VQQUJBU0VfQU5PTl9LRVk6ICcke2Vudi5WSVRFX1NVUEFCQVNFX0FOT05fS0VZIHx8ICcnfSdcbn07XG4gICAgICBgLnRyaW0oKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaHRtbEZpbGVzID0gcmVhZGRpclN5bmMoZGlzdFBhdGgpLmZpbHRlcihmaWxlID0+IGZpbGUuZW5kc1dpdGgoJy5odG1sJykpO1xuXG4gICAgICAgIGh0bWxGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gam9pbihkaXN0UGF0aCwgZmlsZSk7XG4gICAgICAgICAgbGV0IGNvbnRlbnQgPSByZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGYtOCcpO1xuXG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShcbiAgICAgICAgICAgIC88c2NyaXB0IHNyYz1cIlxcL2Vudi1jb25maWdcXC5qc1wiPjxcXC9zY3JpcHQ+L2csXG4gICAgICAgICAgICBgPHNjcmlwdD4ke2VudlNjcmlwdH08L3NjcmlwdD5gXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHdyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIGNvbnRlbnQsICd1dGYtOCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgXHUyNzEzIEVudmlyb25tZW50IHZhcmlhYmxlcyBpbmplY3RlZCBpbmxpbmUgaW4gJHtodG1sRmlsZXMubGVuZ3RofSBIVE1MIGZpbGVzYCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5qZWN0IGlubGluZSBlbnYgdmFyaWFibGVzOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG5jb25zdCBzd1ZlcnNpb25QbHVnaW4gPSAoKTogUGx1Z2luID0+IHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAnc3ctdmVyc2lvbi1wbHVnaW4nLFxuICAgIGFwcGx5OiAnYnVpbGQnLFxuICAgIGNsb3NlQnVuZGxlKCkge1xuICAgICAgY29uc3Qgc3dQYXRoID0gam9pbihfX2Rpcm5hbWUsICdkaXN0JywgJ3N3LmpzJyk7XG4gICAgICB0cnkge1xuICAgICAgICBsZXQgY29udGVudCA9IHJlYWRGaWxlU3luYyhzd1BhdGgsICd1dGYtOCcpO1xuXG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoXG4gICAgICAgICAgL2NvbnN0IENBQ0hFX1ZFUlNJT04gPSBEYXRlXFwubm93XFwoXFwpOy8sXG4gICAgICAgICAgYGNvbnN0IENBQ0hFX1ZFUlNJT04gPSAke2J1aWxkVGltZXN0YW1wfTtgXG4gICAgICAgICk7XG5cbiAgICAgICAgd3JpdGVGaWxlU3luYyhzd1BhdGgsIGNvbnRlbnQsICd1dGYtOCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhgXHUyNzEzIFNlcnZpY2UgV29ya2VyIHZlcnNpb25lZCB3aXRoIHRpbWVzdGFtcDogJHtidWlsZFRpbWVzdGFtcH1gKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB2ZXJzaW9uIFNlcnZpY2UgV29ya2VyOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoe1xuICBiYXNlOiAnLycsXG4gIHBsdWdpbnM6IFtyZWFjdCgpLCBpbmxpbmVFbnZQbHVnaW4oKSwgc3dWZXJzaW9uUGx1Z2luKCldLFxuICBvcHRpbWl6ZURlcHM6IHtcbiAgICBleGNsdWRlOiBbJ2x1Y2lkZS1yZWFjdCddLFxuICB9LFxuICBidWlsZDoge1xuICAgIHJvbGx1cE9wdGlvbnM6IHtcbiAgICAgIG91dHB1dDoge1xuICAgICAgICBtYW51YWxDaHVua3M6IHVuZGVmaW5lZFxuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQXlOLFNBQVMsY0FBc0IsZUFBZTtBQUN2USxPQUFPLFdBQVc7QUFDbEIsU0FBUyxjQUFjLGVBQWUsbUJBQW1CO0FBQ3pELFNBQVMsWUFBWTtBQUhyQixJQUFNLG1DQUFtQztBQUt6QyxJQUFNLGlCQUFpQixLQUFLLElBQUk7QUFFaEMsSUFBTSxrQkFBa0IsTUFBYztBQUNwQyxTQUFPO0FBQUEsSUFDTCxNQUFNO0FBQUEsSUFDTixPQUFPO0FBQUEsSUFDUCxjQUFjO0FBQ1osWUFBTSxXQUFXLEtBQUssa0NBQVcsTUFBTTtBQUN2QyxZQUFNLE1BQU0sUUFBUSxjQUFjLFFBQVEsSUFBSSxHQUFHLEVBQUU7QUFFbkQsWUFBTSxZQUFZO0FBQUE7QUFBQSx1QkFFRCxJQUFJLHlCQUF5QixFQUFFO0FBQUEsMkJBQzNCLElBQUksNkJBQTZCLEVBQUU7QUFBQSw0QkFDbEMsSUFBSSw4QkFBOEIsRUFBRTtBQUFBLDBCQUN0QyxJQUFJLDRCQUE0QixFQUFFO0FBQUEsOEJBQzlCLElBQUksZ0NBQWdDLEVBQUU7QUFBQSxtQ0FDakMsSUFBSSxxQ0FBcUMsRUFBRTtBQUFBLHNCQUN4RCxJQUFJLHdCQUF3QixFQUFFO0FBQUEsNkJBQ3ZCLElBQUksK0JBQStCLEVBQUU7QUFBQSxpQ0FDakMsSUFBSSxtQ0FBbUMsRUFBRTtBQUFBLGtDQUN4QyxJQUFJLG9DQUFvQyxFQUFFO0FBQUEsZ0NBQzVDLElBQUksa0NBQWtDLEVBQUU7QUFBQSxvQ0FDcEMsSUFBSSxzQ0FBc0MsRUFBRTtBQUFBLHlDQUN2QyxJQUFJLDJDQUEyQyxFQUFFO0FBQUEsNEJBQzlELElBQUksOEJBQThCLEVBQUU7QUFBQSxnQkFDaEQsSUFBSSxrQkFBa0IsRUFBRTtBQUFBLG1CQUNyQixJQUFJLHFCQUFxQixFQUFFO0FBQUEsd0JBQ3RCLElBQUksMEJBQTBCLEVBQUU7QUFBQTtBQUFBLFFBRWhELEtBQUs7QUFFUCxVQUFJO0FBQ0YsY0FBTSxZQUFZLFlBQVksUUFBUSxFQUFFLE9BQU8sVUFBUSxLQUFLLFNBQVMsT0FBTyxDQUFDO0FBRTdFLGtCQUFVLFFBQVEsVUFBUTtBQUN4QixnQkFBTSxXQUFXLEtBQUssVUFBVSxJQUFJO0FBQ3BDLGNBQUksVUFBVSxhQUFhLFVBQVUsT0FBTztBQUU1QyxvQkFBVSxRQUFRO0FBQUEsWUFDaEI7QUFBQSxZQUNBLFdBQVcsU0FBUztBQUFBLFVBQ3RCO0FBRUEsd0JBQWMsVUFBVSxTQUFTLE9BQU87QUFBQSxRQUMxQyxDQUFDO0FBRUQsZ0JBQVEsSUFBSSxtREFBOEMsVUFBVSxNQUFNLGFBQWE7QUFBQSxNQUN6RixTQUFTLE9BQU87QUFDZCxnQkFBUSxNQUFNLDBDQUEwQyxLQUFLO0FBQUEsTUFDL0Q7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGO0FBRUEsSUFBTSxrQkFBa0IsTUFBYztBQUNwQyxTQUFPO0FBQUEsSUFDTCxNQUFNO0FBQUEsSUFDTixPQUFPO0FBQUEsSUFDUCxjQUFjO0FBQ1osWUFBTSxTQUFTLEtBQUssa0NBQVcsUUFBUSxPQUFPO0FBQzlDLFVBQUk7QUFDRixZQUFJLFVBQVUsYUFBYSxRQUFRLE9BQU87QUFFMUMsa0JBQVUsUUFBUTtBQUFBLFVBQ2hCO0FBQUEsVUFDQSx5QkFBeUIsY0FBYztBQUFBLFFBQ3pDO0FBRUEsc0JBQWMsUUFBUSxTQUFTLE9BQU87QUFDdEMsZ0JBQVEsSUFBSSxtREFBOEMsY0FBYyxFQUFFO0FBQUEsTUFDNUUsU0FBUyxPQUFPO0FBQ2QsZ0JBQVEsTUFBTSxxQ0FBcUMsS0FBSztBQUFBLE1BQzFEO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFDRjtBQUVBLElBQU8sc0JBQVEsYUFBYTtBQUFBLEVBQzFCLE1BQU07QUFBQSxFQUNOLFNBQVMsQ0FBQyxNQUFNLEdBQUcsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7QUFBQSxFQUN2RCxjQUFjO0FBQUEsSUFDWixTQUFTLENBQUMsY0FBYztBQUFBLEVBQzFCO0FBQUEsRUFDQSxPQUFPO0FBQUEsSUFDTCxlQUFlO0FBQUEsTUFDYixRQUFRO0FBQUEsUUFDTixjQUFjO0FBQUEsTUFDaEI7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGLENBQUM7IiwKICAibmFtZXMiOiBbXQp9Cg==
